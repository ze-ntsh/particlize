<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Particlize</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <canvas id="particle-canvas">
        <p>Your browser does not support the HTML5 canvas element.</p>
      </canvas>
    </div>
  </body>

  <script type="module">
    import { ParticleSystem, Particle, Particlizer } from "./src";
    import { textToMesh } from "./src/utils";
    import { MeshSurfaceSampler } from "./src/Samplers";
    import * as THREE from "three";

    const canvas = document.getElementById("particle-canvas");

    const ps = new ParticleSystem({
      canvas: canvas,
      preWarm: true,
      maxParticles: 100000,
    });

    // Generate particles in a sphere shape
    const sphereParticles = [];
    const numParticles = 100000;
    const spikes = 5; // Number of star points
    const innerRadius = 0.5;
    const outerRadius = 1.2;

    for (let i = 0; i < numParticles; i++) {
      // Distribute particles around a sphere
      const u = Math.random();
      const v = Math.random();
      const theta = 2 * Math.PI * u;
      const phi = Math.acos(2 * v - 1);

      // Alternate between inner and outer radius to create spikes
      const spike = Math.floor((theta / (2 * Math.PI)) * spikes * 2);
      const r = spike % 2 === 0 ? outerRadius : innerRadius + Math.random() * (outerRadius - innerRadius) * 0.2;

      const x = r * Math.sin(phi) * Math.cos(theta);
      const y = r * Math.sin(phi) * Math.sin(theta);
      const z = r * Math.cos(phi);

      sphereParticles.push(
        new Particle({
          position: [x, y, z],
        })
      );
    }

    ps.addParticles(
      new Particlizer({
        particles: sphereParticles,
      })
    );

    ps.start();
  </script>
</html>
