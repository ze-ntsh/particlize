<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="Particlize - A 3D particle system visualization" />
    <meta name="keywords" content="particles, 3D, animation, visualization, WebGL, three.js" />
    <title>Particlize</title>
    <link rel="stylesheet" href="style.css" />
  </head>
  <body>
    <div class="app">
      <canvas id="particle-canvas">
        <p>Your browser does not support the HTML5 canvas element.</p>
      </canvas>
    </div>
  </body>

  <script type="module">
    import { ParticleSystem, Particle, PropertyManager } from "./src";
    import { SamplerFrame } from "./src/frames";
    import { textToMesh } from "./src/utils";
    import { MeshSurfaceSampler } from "./src/samplers";
    import * as THREE from "three";
    import { GLTFLoader } from "three/addons/loaders/GLTFLoader.js";

    const canvas = document.getElementById("particle-canvas");

    const ps = new ParticleSystem({
      canvas: canvas,
      preWarm: true,
      maxParticles: 100000,
      backgroundColor: [0.0, 0.0, 0.0, 1.0], // Dark background
    });
    // Create three concentric sphere meshes
    const sphereRadii = [0.8, 1.5, 2.3]; // Radii for 3 concentric spheres
    const sphereColors = [
      0xff0000, // Red (inner)
      0x00ff00, // Green (middle)
      0x0000ff, // Blue (outer)
    ];

    // Create particles from mesh surfaces
    const sphereParticles = [];
    const particlesPerSphere = Math.floor(100000 / sphereRadii.length);

    for (let i = 0; i < sphereRadii.length; i++) {
      // Create sphere geometry and material
      const geometry = new THREE.SphereGeometry(sphereRadii[i], 32, 32);
      const material = new THREE.MeshBasicMaterial({ color: sphereColors[i] });
      const mesh = new THREE.Mesh(geometry, material);

      ps.addParticles(
        new SamplerFrame({
          sampler: new MeshSurfaceSampler(mesh),
          count: particlesPerSphere,
        })
      );
    }

    ps.start();
  </script>
</html>
